(function(){/*
 almond 0.3.3 Copyright jQuery Foundation and other contributors.
 Released under MIT license, http://github.com/requirejs/almond/LICENSE
*/
var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(f,k,m){if(m.get||m.set)throw new TypeError("ES3 does not support getters and setters.");f!=Array.prototype&&f!=Object.prototype&&(f[k]=m.value)};$jscomp.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(f,k,m,d){if(k){m=$jscomp.global;f=f.split(".");for(d=0;d<f.length-1;d++){var b=f[d];b in m||(m[b]={});m=m[b]}f=f[f.length-1];d=m[f];k=k(d);k!=d&&null!=k&&$jscomp.defineProperty(m,f,{configurable:!0,writable:!0,value:k})}};$jscomp.polyfill("Object.setPrototypeOf",function(f){return f?f:"object"!=typeof"".__proto__?null:function(k,f){k.__proto__=f;if(k.__proto__!==f)throw new TypeError(k+" is not extensible");return k}},"es6","es5");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(f){return $jscomp.SYMBOL_PREFIX+(f||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var f=$jscomp.global.Symbol.iterator;f||(f=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[f]&&$jscomp.defineProperty(Array.prototype,f,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(f){var k=0;return $jscomp.iteratorPrototype(function(){return k<f.length?{done:!1,value:f[k++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(f){$jscomp.initSymbolIterator();f={next:f};f[$jscomp.global.Symbol.iterator]=function(){return this};return f};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(f,k){$jscomp.initSymbolIterator();f instanceof String&&(f+="");var m=0,d={next:function(){if(m<f.length){var b=m++;return{value:k(b,f[b]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill("Array.prototype.keys",function(f){return f?f:function(){return $jscomp.iteratorFromArray(this,function(f){return f})}},"es6-impl","es3");
(function(){var f,k;(function(d){function b(g,c){var a,b,t,l,h,p,d,e,r,n=c&&c.split("/"),f=u.map,k=f&&f["*"]||{};if(g){g=g.split("/");h=g.length-1;u.nodeIdCompat&&w.test(g[h])&&(g[h]=g[h].replace(w,""));"."===g[0].charAt(0)&&n&&(h=n.slice(0,n.length-1),g=h.concat(g));for(h=0;h<g.length;h++)a=g[h],"."===a?(g.splice(h,1),--h):".."===a&&0!==h&&(1!==h||".."!==g[2])&&".."!==g[h-1]&&0<h&&(g.splice(h-1,2),h-=2);g=g.join("/")}if((n||k)&&f){a=g.split("/");for(h=a.length;0<h;--h){b=a.slice(0,h).join("/");if(n)for(r=
n.length;0<r;--r)if(t=f[n.slice(0,r).join("/")])if(t=t[b]){l=t;p=h;break}if(l)break;!d&&k&&k[b]&&(d=k[b],e=h)}!l&&d&&(l=d,p=e);l&&(a.splice(0,p,l),g=a.join("/"))}return g}function e(g,c){return function(){var a=y.call(arguments,0);"string"!==typeof a[0]&&1===a.length&&a.push(null);return q.apply(d,a.concat([g,c]))}}function a(g){return function(c){return b(c,g)}}function c(g){return function(c){defined[g]=c}}function t(g){if(m.call(l.waiting,g)){var c=l.waiting[g];delete l.waiting[g];l.defining[g]=
!0;n.apply(d,c)}if(!m.call(l.defined,g)&&!m.call(l.defining,g))throw Error("No "+g);return l.defined[g]}function p(g){var c,a=g?g.indexOf("!"):-1;-1<a&&(c=g.substring(0,a),g=g.substring(a+1,g.length));return[c,g]}function h(g){return function(){return u&&u.config&&u.config[g]||{}}}var n,q,x,v,u={},m=Object.prototype.hasOwnProperty,y=[].slice,w=/\.js$/;window._coview||(window._coview={});var l=window._coview;l.amd||(l.amd=!0,l.defined={},l.waiting={},l.defining={});x=function(g,c){var l,h=p(g),d=h[0],
e=c[1];g=h[1];d&&(d=b(d,e),l=t(d));d?g=l&&l.normalize?l.normalize(g,a(e)):b(g,e):(g=b(g,e),h=p(g),d=h[0],g=h[1],d&&(l=t(d)));return{f:d?d+"!"+g:g,n:g,pr:d,p:l}};v={require:function(g){return e(g)},exports:function(g){var c=l.defined[g];return"undefined"!==typeof c?c:l.defined[g]={}},module:function(g){return{id:g,uri:"",exports:l.defined[g],config:h(g)}}};n=function(g,a,b,h){var n,f,k,r,w,q=[];f=typeof b;var z;w=(h=h||g)?p(h):[];if("undefined"===f||"function"===f){a=!a.length&&b.length?["require",
"exports","module"]:a;for(r=0;r<a.length;r+=1)if(k=x(a[r],w),f=k.f,"require"===f)q[r]=v.require(g);else if("exports"===f)q[r]=v.exports(g),z=!0;else if("module"===f)n=q[r]=v.module(g);else if(m.call(l.defined,f)||m.call(l.waiting,f)||m.call(l.defining,f))q[r]=t(f);else if(k.p)k.p.load(k.n,e(h,!0),c(f),{}),q[r]=l.defined[f];else throw Error(g+" missing "+f);a=b?b.apply(l.defined[g],q):void 0;g&&(n&&n.exports!==d&&n.exports!==l.defined[g]?l.defined[g]=n.exports:a===d&&z||(l.defined[g]=a))}else g&&(l.defined[g]=
b)};f=q=function(g,c,a,b,l){if("string"===typeof g)return v[g]?v[g](c):t(x(g,c?p(c):[]).f);if(!g.splice){u=g;u.deps&&q(u.deps,u.callback);if(!c)return;c.splice?(g=c,c=a,a=null):g=d}c=c||function(){};"function"===typeof a&&(a=b,b=l);b?n(d,g,c,a):setTimeout(function(){n(d,g,c,a)},4);return q};q.config=function(c){return q(c)};k=function(c,a,b){if("string"!==typeof c)throw Error("See almond README: incorrect module build, no module name");a.splice||(b=a,a=[]);m.call(l.defined,c)||m.call(l.waiting,c)||
(l.waiting[c]=[c,a,b])};l.require=f;l.define=k;k.amd={jQuery:!0}})();k("@types/native/Native",["require","exports"],function(d,b){var e=function(){function a(){}a.prototype.createIframe=function(c){this.iframe=document.createElement("iframe");this.iframe.name="coview-class-references";this.iframe.src="about:blank";c.appendChild(this.iframe);c=this.iframe.contentWindow;c.Array.name&&(this.array=c.Array);c.String.name&&(this.string=c.String);this.iframe.style.display="none"};a.prototype.createXmlHttpRequest=
function(c){return this.iframe&&this.iframe.parentElement&&this.iframe.contentWindow?new this.iframe.contentWindow.XMLHttpRequest(c):new XMLHttpRequest(c)};a.prototype.removeIframe=function(){this.iframe&&(this.iframe.parentElement&&this.iframe.parentElement.removeChild(this.iframe),this.iframe=null)};return a}();b["native"]=new e});k("@types/launcher/Globals",["require","exports"],function(d,b){b.Globals={coview:window.coview};b.coview=window.coview});var m=this&&this.__extends||function(){var d=
function(b,e){d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return d(b,e)};return function(b,e){function a(){this.constructor=b}d(b,e);b.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}}();k("coview/api/base/BaseTO",["require","exports"],function(d,b){Object.defineProperty(b,"__esModule",{value:!0})});k("coview/api/customer/CustomerCredentials",["require","exports"],function(d,
b){Object.defineProperty(b,"__esModule",{value:!0});b.CustomerCredentials=void 0;var e=function(){function a(){this.className=a.CLASS_NAME}a.CLASS_NAME="com.coview.client.api.customer.CustomerCredentials";return a}();b.CustomerCredentials=e});k("coview/api/clientinfo/InitRequestTO",["require","exports"],function(d,b){Object.defineProperty(b,"__esModule",{value:!0});b.InitRequestTO=void 0;var e=function(){return function(){}}();b.InitRequestTO=e});k("coview/api/clientinfo/ChatInfoTO",["require","exports"],
function(d,b){Object.defineProperty(b,"__esModule",{value:!0});b.ChatInfoTO=void 0;var e=function(){return function(){}}();b.ChatInfoTO=e});k("coview/api/clientinfo/LauncherInfoTO",["require","exports"],function(d,b){Object.defineProperty(b,"__esModule",{value:!0});b.LauncherInfoTO=void 0;var e=function(){return function(){}}();b.LauncherInfoTO=e});k("coview/core/CookieService",["require","exports"],function(d,b){Object.defineProperty(b,"__esModule",{value:!0});b.cookieService=b.CookieService=void 0;
var e=function(){function a(){this.preferSubDomains=!1}a.prototype.setCookie=function(c,a,b,h,d,e){b=b&&0<b.length?"path="+b+";":"path=/;";var t="";d&&0<d.length&&(t="SameSite="+d+";");d="";e&&(d="Secure;");c=this.getCookieName(c);h=-1!==c.indexOf("standalone")||null==h?"expires=Session;":"expires="+h.toUTCString()+";";(e=null==a)&&(a="");for(var p=0,f=this.extractDomains();p<f.length;p++)if(document.cookie=c+"="+a+"; domain="+f[p]+";"+h+b+d+t,!e&&null!=this.getCookieWithoutSuffix(c))return!0;return!1};
a.prototype.clearCookie=function(c,a){var b=new Date;b.setTime(0);this.setCookie(c,null,a,b,null,!1)};a.prototype.getCookie=function(c){return this.getCookieWithoutSuffix(this.getCookieName(c))};a.prototype.getCookieWithoutSuffix=function(c){c+="=";for(var a=0,b=document.cookie.split(";");a<b.length;a++){for(var h=b[a];" "===h.charAt(0);)h=h.substring(1);if(0===h.indexOf(c)&&(h=h.substring(c.length,h.length),0<h.length))return h}return null};a.prototype.getCookieName=function(c){return null!=this.cookieSuffix?
c+"-"+this.cookieSuffix:c};a.prototype.extractDomains=function(){var c=[],a=window.location.hostname;0===a.indexOf("www.")&&(a=a.substring(4));-1!==a.indexOf(":")&&(a=a.split(":")[0]);for(var b=a.split("."),h=b.length-2;0<=h;h--)c.push(b.slice(h).join("."));0===c.length&&c.push(a);return this.preferSubDomains?c.reverse():c};a.prototype.resolveAndSetCookieSuffix=function(a,b){-1!==window.location.search.indexOf("cov-standalone")?this.cookieSuffix="standalone":this.cookieSuffix=null!=b?b:""};a.prototype.setPreferSubDomains=
function(a){this.preferSubDomains=a};a.CUSTOMER_JWT_COOKIE_NAME="X-JWT";a.AGENT_FREE_BROWSE_JWT_COOKIE_NAME="X-AGENT-FREEBROWSE-TOKEN";a.JWT_ACCESS_COOKIE_NAME="X-JWT";return a}();b.CookieService=e;b.cookieService=new e});k("coview/core/FeatureToggle",["require","exports"],function(d,b){Object.defineProperty(b,"__esModule",{value:!0});b.FeatureToggle=void 0;var e=b.FeatureToggle||(b.FeatureToggle={});e.remoteLogging="remoteLogging";e.remoteLoggingDebug="remoteLoggingDebug";e.consoleDebug="consoleDebug";
e.cobrowseClientResourceUpload="cobrowseClientResourceUpload"});k("coview/core/FeatureToggleConfig",["require","exports","coview/core/FeatureToggle"],function(d,b,e){Object.defineProperty(b,"__esModule",{value:!0});b.FeatureToggleConfig=void 0;d=function(){function a(){}a.getEnabledFeatures=function(){return a.enabledFeatures};a.setEnabledFeatures=function(c){a.enabledFeatures=c};a.isEnabled=function(c){return a.enabledFeatures?a.checkIsEnabled(c,a.enabledFeatures):a.checkIsEnabled(c,a.fallbackEnabedFatures)};
a.checkIsEnabled=function(a,b){return-1!==b.indexOf(a)};a.isLoaded=function(){return null!=a.enabledFeatures};a.enabledFeatures=null;a.fallbackEnabedFatures=[e.FeatureToggle.remoteLogging];return a}();b.FeatureToggleConfig=d});k("coview/core/integrations/intercom/IntercomApiProvider",["require","exports"],function(d,b){Object.defineProperty(b,"__esModule",{value:!0});b.IntercomApiProvider=void 0;var e=function(){function a(){}a.isIntercomInstalled=function(){return null!=window.Intercom};a.prototype.trackEvent=
function(a,b){this.intercom()("trackEvent",a,b)};a.prototype.update=function(a){this.intercom()("update",a)};a.prototype.updateIntercom=function(){var a={nounce:Date.now()};this.intercom()("update",a)};a.prototype.showMessages=function(){this.intercom()("showMessages")};a.prototype.hide=function(){this.intercom()("hide")};a.prototype.onHide=function(a){this.intercom()("onHide",a)};a.prototype.show=function(){this.intercom()("show")};a.prototype.intercom=function(){return window.Intercom};return a}();
b.IntercomApiProvider=e});k("coview/core/post/events/IFramePostEvent",["require","exports"],function(d,b){Object.defineProperty(b,"__esModule",{value:!0});b.IFramePostEvent=void 0;var e=function(){return function(){}}();b.IFramePostEvent=e});k("coview/core/post/events/StartIFrameConnectionPostEvent",["require","exports","coview/core/post/events/IFramePostEvent"],function(d,b,e){Object.defineProperty(b,"__esModule",{value:!0});b.StartIFrameConnectionPostEvent=void 0;d=function(a){function c(){var b=
a.call(this)||this;b.type=c.TYPE;return b}m(c,a);c.TYPE="coview-startIFrameConnectionPostEvent";return c}(e.IFramePostEvent);b.StartIFrameConnectionPostEvent=d});k("coview/Lang",["require","exports"],function(d,b){Object.defineProperty(b,"__esModule",{value:!0});b.Lang=void 0;var e=function(){function a(){}a.toBoolean=function(a){return null==a?!1:"boolean"===typeof a?a:"true"===a};a.$$apply=function(a,b){if(0===b.length)return a();if(1===b.length)return a(b[0]);if(2===b.length)return a(b[0],b[1]);
if(3===b.length)return a(b[0],b[1],b[2]);if(4===b.length)return a(b[0],b[1],b[2],b[3]);throw Error("Too many arguments: "+b.length);};return a}();b.Lang=e});k("coview/core/push/ChatConfig",["require","exports","coview/Lang"],function(d,b,e){Object.defineProperty(b,"__esModule",{value:!0});b.ChatConfig=void 0;d=function(){function a(){this.showButton=!1}a.normalize=function(b){var c=new a;c.showButton=e.Lang.toBoolean(b.showButton);return c};return a}();b.ChatConfig=d});k("coview/core/push/Integrations",
["require","exports","coview/Lang"],function(d,b,e){Object.defineProperty(b,"__esModule",{value:!0});b.Integrations=void 0;d=function(){function a(){this.intercom=!1}a.normalize=function(b){var c=new a;c.intercom=e.Lang.toBoolean(b.intercom);return c};return a}();b.Integrations=d});k("coview/core/push/InitConfig",["require","exports","coview/Lang","coview/core/push/ChatConfig","coview/core/push/Integrations"],function(d,b,e,a,c){Object.defineProperty(b,"__esModule",{value:!0});b.InitConfig=void 0;
d=function(){function b(){this.skipTracking=this.bindConsole=this.publicPage=!1}b.prototype.canShowButton=function(){return null==this.chat||this.chat.showButton};b.prototype.getCredentials=function(){var a=this.user;null==a||null!=a.id&&""!==a.id||(a=null);return a};b.fromArguments=function(a){for(var c=new b,d=0;d<a.length;d++){var e=a[d],f=e[0];if("set"===f||"start"===f)if(2===e.length)for(var e=e[1],f=0,p=Object.keys(e);f<p.length;f++){var k=p[f];c[k]=e[k]}else if(3===e.length)c[e[1]]=e[2];else throw Error("Invalid arguments for coview('"+
f+"')");}return b.normalize(c)};b.normalize=function(d){var h=new b;Object.keys(d).forEach(function(a){a=a.toString();h[a]=d[a]});h.publicPage=e.Lang.toBoolean(h.publicPage);h.bindConsole=e.Lang.toBoolean(h.bindConsole);h.skipTracking=e.Lang.toBoolean(h.skipTracking);d.chat&&(h.chat=a.ChatConfig.normalize(d.chat));d.integrations&&(h.integrations=c.Integrations.normalize(d.integrations));return h};return b}();b.InitConfig=d});k("coview/core/UrlChangeListenerService",["require","exports"],function(d,
b){Object.defineProperty(b,"__esModule",{value:!0});b.urlChangeListenerService=b.UrlChangeListenerService=void 0;var e=function(){function a(){}a.prototype.listenToUrlChange=function(a){this.checkPushStates(a);this.checkHashes(a)};a.prototype.removeUrlChangeListener=function(){null!=this.hashChangeListener&&(window.removeEventListener(a.HASH_CHANGE_EVENT,this.hashChangeListener),this.hashChangeListener=null);null!=this.pushState&&(history[a.PUSH_STATE]=this.pushState)};a.prototype.checkPushStates=
function(b){this.pushState=history[a.PUSH_STATE];if(null!=this.pushState){var c=this;history[a.PUSH_STATE]=function(){try{c.fireUrlChangeEvent(arguments[2],"PUSH_STATE",b)}catch(p){}return c.pushState.apply(history,arguments)}}};a.prototype.checkHashes=function(b){var c=this;this.hashChangeListener=function(){c.fireUrlChangeEvent(window.location.href,"HASH",b)};window.addEventListener(a.HASH_CHANGE_EVENT,this.hashChangeListener)};a.prototype.fireUrlChangeEvent=function(a,b,d){0===a.indexOf("/")&&
(a=window.location.origin+a);a!==this.currentUrl&&(this.currentUrl=a,d(a,b))};a.HASH_CHANGE_EVENT="hashchange";a.PUSH_STATE="pushState";return a}();b.UrlChangeListenerService=e;b.urlChangeListenerService=new e});k("coview/util/JsonUtil",["require","exports"],function(d,b){Object.defineProperty(b,"__esModule",{value:!0});b.JsonUtil=void 0;var e=function(){function a(){}a.stringify=function(a){return JSON.stringify(a,function(a,b){if(null!==b&&void 0!==b)return b})};return a}();b.JsonUtil=e});k("coview/launcher/LauncherButton",
["require","exports","../../@types/launcher/Globals"],function(d,b,e){Object.defineProperty(b,"__esModule",{value:!0});b.LauncherButton=void 0;d=function(){function a(a){this.createButton(a)}a.prototype.createButton=function(a){this.addChatButtonStyleToHead(a);this.chatButton=document.createElement("div");a=document.createElement("div");a.className="cov cov-position-container";this.chatButton.style.display="none";this.chatButton.className="cov cov-chat-button";this.chatButton.innerHTML="<div class='cov cov-chat-button'><div class='cov cov-launcher-icon cov-launcher-icon-chat'><div class='cov cov-launcher-icon-chat-dot cov-launcher-icon-chat-dot1'></div><div class='cov cov-launcher-icon-chat-dot cov-launcher-icon-chat-dot2'></div><div class='cov cov-launcher-icon-chat-dot cov-launcher-icon-chat-dot3'></div></div></div>";
a.appendChild(this.chatButton);document.getElementById("coview-container").appendChild(a)};a.prototype.loadScriptOnClick=function(){var a=this;this.launcherClickListener=function(){a.chatButton.removeEventListener("click",a.launcherClickListener);e.coview("openWidget")};this.chatButton.addEventListener("click",this.launcherClickListener);this.chatButton.style.display="block"};a.prototype.addChatButtonStyleToHead=function(a){a=".cov.cov-chat-button { z-index: 100; position: absolute; bottom: 0px; right: 0px; width: 60px; height: 60px; border-radius: 50%; background-color: "+
a+"; cursor: pointer; opacity: 1; transition: transform 0.2s ease, opacity 0.2s ease; animation-name: enterScreen; animation-duration: 0.5s; animation-timing-function: ease; box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.35); } .cov.cov-launcher-icon { width: 100%; height: 100%; background-position: center center; background-repeat: no-repeat; position: absolute; transition: transform 0.2s; opacity: 1; color: #2F80ED; background-image: url('data:image/png;base64,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'); background-size: 60px; }"+
(" .cov.cov-launcher-icon-chat-dot { width: 4px; height: 4px; background-color: "+a+"; position: absolute; top: 28px; opacity: 0; animation-name: fadeMeIn; animation-duration: 0.5s; animation-fill-mode: forwards; animation-timing-function: ease; border-radius: 2px; } ")+" .cov.cov-launcher-icon-chat-dot1 { left: 21px; animation-delay: 0.1s; }  .cov.cov-launcher-icon-chat-dot2 { left: 28px; animation-delay: 0.2s; } ";a+=" .cov.cov-launcher-icon-chat-dot3 { left: 35px; animation-delay: 0.3s; } ";a+=
" @keyframes fadeMeIn { 0% {opacity:0; transform:scale(0); } 100% {opacity:1; transform:scale(1); }} ";a+=" @keyframes enterScreen { 0% { opacity:0; transform:scale(0.6) rotate(-45deg);} 100% { opacity:1; transform:scale(1); }} ";a+=" .cov.cov-position-container { position: fixed; bottom: 20px; right: 20px; z-index: 2147483647;}";a+=" @media (max-width: 767px) { .cov.cov-position-container { bottom:20px;\tright:20px; } }";a+=" html > body .cov { box-sizing: border-box; box-shadow: none; outline: none; color: inherit; float: none; background: none; padding: 0px; margin: 0px; border-radius: 0px; font-family: 'Lato', sans-serif; min-height: 0px; text-align: left; line-height: 100%; word-break: normal; }";
var b=document.createElement("style");b.appendChild(document.createTextNode(a));document.getElementsByTagName("head")[0].appendChild(b)};return a}();b.LauncherButton=d});k("coview/core/integrations/intercom/IntercomWatcherCallback",["require","exports"],function(d,b){Object.defineProperty(b,"__esModule",{value:!0});b.IntercomWatcherCallback=void 0;var e=function(){return function(){}}();b.IntercomWatcherCallback=e});k("coview/core/integrations/intercom/IntercomWatcher",["require","exports","coview/core/integrations/intercom/IntercomApiProvider"],
function(d,b,e){Object.defineProperty(b,"__esModule",{value:!0});b.IntercomWatcher=void 0;d=function(){function a(b){var c=this;this.requestFound=!1;this.api=new e.IntercomApiProvider;this.api.onHide(function(){c.stopIFrameMutationObserver();c.elementWithNameExists(a.INTERCOM_BORDERLESS_FRAME)&&c.startMutationObserver(a.INTERCOM_BORDERLESS_FRAME)});this.intervalHandle=setInterval(function(){c.requestFound&&(b.onRequestFound(),c.requestFound=!1);null!=c.foundUserId&&(b.onUserIdFound(c.foundUserId),
c.foundUserId=null)},200);this.bodyClickListener=function(){c.frameClicked=performance.now();if(null!=c.foundConversationId)b.onConversationIdFound(c.foundConversationId)};this.startObservers()}a.prototype.startObservers=function(){this.startWatchingIntercomIframe();this.startBodyIntercomIFrameObserver()};a.prototype.startWatchingIntercomIframe=function(){this.elementWithNameExists(a.INTERCOM_MESSENGER_FRAME)?this.startMutationObserver(a.INTERCOM_MESSENGER_FRAME):this.elementWithNameExists(a.INTERCOM_MESSENGER_LOADING_FRAME)?
this.startMutationObserver(a.INTERCOM_MESSENGER_LOADING_FRAME):this.elementWithNameExists(a.INTERCOM_BORDERLESS_FRAME)&&this.startMutationObserver(a.INTERCOM_BORDERLESS_FRAME)};a.prototype.elementWithNameExists=function(a){return 0<document.getElementsByName(a).length};a.prototype.shutdown=function(){this.stopIFrameMutationObserver();this.stopIntercomContainerObserver();clearInterval(this.intervalHandle)};a.prototype.stopIntercomContainerObserver=function(){null!=this.intercomContainerObserver&&this.intercomContainerObserver.disconnect();
this.intercomContainerObserver=null};a.prototype.stopIFrameMutationObserver=function(){null!=this.iframeObserver&&(this.iframeObserver.disconnect(),null!=this.currentObservedIframeBody&&this.currentObservedIframeBody.removeEventListener("click",this.bodyClickListener));this.iframeObserver=null};a.prototype.startMutationObserver=function(a){var b=this;this.stopIFrameMutationObserver();a=document.getElementsByName(a)[0];this.iframeObserver=new MutationObserver(function(a){return b.onIFrameMutation(a)});
this.currentObservedIframeBody=a.contentDocument.body;this.currentObservedIframeBody.addEventListener("click",this.bodyClickListener,!0);this.handleFoundCoviewImages(this.currentObservedIframeBody);this.iframeObserver.observe(this.currentObservedIframeBody,{childList:!0,subtree:!0})};a.prototype.startBodyIntercomIFrameObserver=function(){var b=this;null==document.getElementById(a.INTERCOM_CONTAINER)?setTimeout(function(){b.startBodyIntercomIFrameObserver()},1E3):(this.stopIntercomContainerObserver(),
this.startWatchingIntercomIframe(),this.intercomContainerObserver=new MutationObserver(function(a){return b.onIntercomContainerMutation(a)}),this.intercomContainerObserver.observe(document.body,{childList:!0,subtree:!0,attributes:!0}))};a.prototype.onIFrameMutation=function(a){for(var b=0;b<a.length;b++){for(var c=a[b],h=0,d=c.addedNodes;h<d.length;h++){var e=d[h];e.nodeType===e.ELEMENT_NODE&&this.handleFoundCoviewImages(e)}null!=c.target&&c.target.nodeType===c.target.ELEMENT_NODE&&this.handleFoundCoviewImages(c.target)}};
a.prototype.handleFoundCoviewImages=function(a){var b=0;for(a=a.querySelectorAll("img[src*='coview.com']");b<a.length;b++){var c=a[b].src;if(-1!==c.indexOf("#")){var h=c.split("#")[1];if(-1!==h.indexOf("&"))for(c=0,h=h.split("&");c<h.length;c++)this.findIds(h[c]);else this.findIds(h)}else this.requestFound=!0}};a.prototype.findIds=function(b){-1!==b.indexOf("conversation")?this.foundConversationId=b.split("conversation=").join(""):null!=this.frameClicked&&performance.now()-this.frameClicked<a.ALLOWED_CLICK_TO_CALLBACK_TIME_DIFFERENCE_IN_MS&&
(this.foundUserId=b.split("customer=").join(""))};a.prototype.onIntercomContainerMutation=function(b){for(var c=0;c<b.length;c++)for(var d=0,h=b[c].addedNodes;d<h.length;d++){var e=h[d];if(e.nodeType===e.ELEMENT_NODE){var f=e.getElementsByTagName("iframe"),k=[];"IFRAME"===e.nodeName&&k.push(e);for(var e=0,m=f;e<m.length;e++)f=m[e],k.push(f);for(e=0;e<k.length;e++)f=k[e],f.getAttribute("name")===a.INTERCOM_BORDERLESS_FRAME?this.startMutationObserver(a.INTERCOM_BORDERLESS_FRAME):f.getAttribute("name")===
a.INTERCOM_MESSENGER_FRAME?this.startMutationObserver(a.INTERCOM_MESSENGER_FRAME):f.getAttribute("name")===a.INTERCOM_MESSENGER_LOADING_FRAME&&this.startMutationObserver(a.INTERCOM_MESSENGER_LOADING_FRAME)}}};a.INTERCOM_MESSENGER_FRAME="intercom-messenger-frame";a.INTERCOM_MESSENGER_LOADING_FRAME="intercom-messenger-loading-frame";a.INTERCOM_BORDERLESS_FRAME="intercom-borderless-frame";a.INTERCOM_CONTAINER="intercom-container";a.ALLOWED_CLICK_TO_CALLBACK_TIME_DIFFERENCE_IN_MS=5E3;return a}();b.IntercomWatcher=
d});k("coview/launcher/LauncherIntercomContext","require exports ../../@types/launcher/Globals coview/api/customer/CustomerCredentials coview/core/integrations/intercom/IntercomApiProvider coview/core/integrations/intercom/IntercomWatcher".split(" "),function(d,b,e,a,c,f){Object.defineProperty(b,"__esModule",{value:!0});b.LauncherIntercomContext=void 0;d=function(){function b(a){this.intercomHeartbeatHandle=null;this.launcher=a}b.prototype.isIntercomInstalled=function(){return c.IntercomApiProvider.isIntercomInstalled()};
b.prototype.isIntercomEnabled=function(a){if(null!=a.integrations){var b=0;for(a=a.integrations;b<a.length;b++)if("INTERCOM"===a[b])return!0}return!1};b.prototype.waitForIntercomToLoad=function(a){var d=this;c.IntercomApiProvider.isIntercomInstalled()?(this.connectToIntercom(),a()):setTimeout(function(){d.waitForIntercomToLoad(a)},b.INTERCOM_INSTALL_CHECK_TIMEOUT_MS)};b.prototype.connectToIntercom=function(){var a=this.launcher.getInitConfig(),b=new c.IntercomApiProvider;null!=a.integrations&&a.integrations.intercom&&
null!=a.getCredentials()&&(b.update({"coview-app":this.launcher.getHost()+"/#/direct/start-session/"+a.projectKey+"/"+a.user.id}),b.update({"coview-request":this.launcher.getHost()+"/screen-request/?project-key="+a.projectKey+"&ref-id="+a.user.id}))};b.prototype.setupIntercomWatcher=function(){var b=this,c=this.launcher.getInitConfig();this.intercomWatcher=new f.IntercomWatcher({onRequestFound:function(){},onUserIdFound:function(d){null==c.user&&(c.user=new a.CustomerCredentials);c.user.id=d;e.coview("set",
"user",c.user);b.launcher.getLauncherUpdate()},onConversationIdFound:function(a){b.startSendIntercomConversationHeartbeat(a);b.sendIntercomConversationHeartbeat(a)}})};b.prototype.shutdown=function(){null!=this.intercomWatcher&&this.intercomWatcher.shutdown();null!=this.intercomHeartbeatHandle&&(clearInterval(this.intercomHeartbeatHandle),this.intercomHeartbeatHandle=null)};b.prototype.startSendIntercomConversationHeartbeat=function(a){var c=this;this.intercomHeartbeatConversationId=a;null==this.intercomHeartbeatHandle&&
(this.intercomHeartbeatHandle=setInterval(function(){c.sendIntercomConversationHeartbeat(c.intercomHeartbeatConversationId)},b.INTERCOM_HEARTBEAT_MS))};b.prototype.sendIntercomConversationHeartbeat=function(a){a=this.launcher.getHost()+"/api/integration/intercom/heartbeat/"+a;var b=new XMLHttpRequest;b.open("GET",a,!0);b.setRequestHeader("Content-type","application/json;charset=UTF-8");b.send()};b.INTERCOM_INSTALL_CHECK_TIMEOUT_MS=3E3;b.INTERCOM_HEARTBEAT_MS=500;return b}();b.LauncherIntercomContext=
d});k("coview/launcher/Launcher","require exports ../../@types/native/Native coview/api/clientinfo/InitRequestTO coview/api/customer/CustomerCredentials coview/core/CookieService coview/core/FeatureToggleConfig coview/core/integrations/intercom/IntercomApiProvider coview/core/post/events/StartIFrameConnectionPostEvent coview/core/push/ChatConfig coview/core/push/InitConfig coview/core/UrlChangeListenerService coview/util/JsonUtil coview/launcher/LauncherButton coview/launcher/LauncherIntercomContext".split(" "),
function(d,b,e,a,c,f,k,h,m,q,x,v,u,A,y){Object.defineProperty(b,"__esModule",{value:!0});b.Launcher=void 0;d=function(){function b(){this.cookieService=new f.CookieService;this.urlChangeListenerService=new v.UrlChangeListenerService;this.retryAfterClearAuthenticationResponse=this.scriptInjected=!1}b.prototype.init=function(){var a=this;if(null==window.coview)throw Error("global coview variable not set");for(var b=this.getOrCreateCoviewObjectArguments(),c=0;c<b.length;c++){var d=b[0][0];if(this.isStopFunctionKey(d))b.splice(c,
1);else if(this.isStartFunctionKey(d)){this.initCoview();return}}b.push=function(g){var c=g[0];if(a.isStopFunctionKey(c))return b.length;b.splice(b.length,0,g);a.isStartFunctionKey(c)&&a.initCoview();return b.length}};b.prototype.initCoview=function(){var a=this;this.initConfig=x.InitConfig.fromArguments(this.getOrCreateCoviewObjectArguments());if(null==this.initConfig)throw Error("coview init config not found");if(null==this.initConfig.projectKey)throw Error("coview projectKey not defined");this.host=
null!=this.initConfig.hostUrl?this.initConfig.hostUrl:"https://app.coview.com";this.intercomContext=new y.LauncherIntercomContext(this);this.overwriteConsoleLog();this.createRootElement(function(){a.connectToExternalTools();a.postInitConfig()})};b.prototype.createRootElement=function(a){var b=document.createElement("div");b.id="coview-container";b.className="cov cov-root";b.style.cssText="z-index: 2147483647; position:relative;";null!=document.body?(document.body.appendChild(b),e["native"].createIframe(b),
a()):document.addEventListener("DOMContentLoaded",function(){document.body.appendChild(b);e["native"].createIframe(b);a()})};b.prototype.postInitConfig=function(){var a=this;this.post(this.initConfig,this.host+"/api/client-info/launcher",function(b){if(b.isBlocked)console.log("Coview is disabled.");else if(b.clearAuthentication)a.handleClearAuthenticationResponse(b);else if(b.isCustomer&&a.intercomContext.isIntercomEnabled(b)&&!a.intercomContext.isIntercomInstalled()&&!b.loadScript)a.intercomContext.waitForIntercomToLoad(function(){a.postInitConfig()});
else{a.launcherInfo=b;k.FeatureToggleConfig.setEnabledFeatures(b.enabledFeatures);a.overwriteCoviewArray();var c=window.coview;c("set","launcherInfo",b);b.isCustomer?a.tryInjectCustomerScript(b):b.loadScript&&a.injectScript()}})};b.prototype.overwriteCoviewArray=function(){var b=this,a=this.getOrCreateCoviewObjectArguments();a.push=function(c){b.handleCoviewArgument(c);a.splice(a.length,0,c);return a.length}};b.prototype.handleClearAuthenticationResponse=function(a){this.cookieService.clearCookie(f.CookieService.CUSTOMER_JWT_COOKIE_NAME);
a.unknownProjectKey?console.log("You entered an invalid project key. Please ensure you entered a correct one"):a.isCustomer?this.retryAfterClearAuthenticationResponse||(this.retryAfterClearAuthenticationResponse=!0,this.postInitConfig()):console.log("Your coview authentication seems out of date. Please refresh the page")};b.prototype.hideChatButton=function(){null==this.initConfig.chat&&(this.initConfig.chat=new q.ChatConfig);this.initConfig.chat.showButton=!1;var a=window.coview;a("set","chat",this.initConfig.chat)};
b.prototype.tryInjectCustomerScript=function(a){var b=this;(this.intercomContext.isIntercomEnabled(a)||this.isChatButtonDisabled(a))&&this.hideChatButton();a.loadScript||this.isCustomerScriptInjectionAllowed()?this.injectScript():(this.urlChangeListenerService.listenToUrlChange(function(){b.getLauncherUpdate()}),this.initConfig.canShowButton()&&(this.launcherButton=new A.LauncherButton(a.chatInfo.mainColor),this.launcherButton.loadScriptOnClick()),this.intercomContext.isIntercomEnabled(a)&&this.intercomContext.setupIntercomWatcher())};
b.prototype.isChatButtonDisabled=function(a){return null!=a.chatInfo&&!a.chatInfo.isChatEnabled};b.prototype.isCustomerScriptInjectionAllowed=function(){if(-1!==window.location.search.indexOf(b.REQUEST_SCREENCAST)||-1!==window.location.search.indexOf(b.REQUEST_SCREENSHOT)||-1!==window.location.search.indexOf(b.REQUEST_COBROWSE))return!0;for(var a=0,c=this.getOrCreateCoviewObjectArguments();a<c.length;a++)if(!this.isNonFunctionKey(c[a][0]))return!0;return!1};b.prototype.getLauncherUpdate=function(){var a=
this;this.post(this.initConfig,this.host+"/api/client-info/launcher-update",function(b){null!=b&&b.loadScript&&(a.launcherInfo=b,b=window.coview,b("set","launcherInfo",a.launcherInfo),a.injectScript())})};b.prototype.overwriteConsoleLog=function(){if(this.initConfig.bindConsole){var a=window.console.log;window.console.log=function(){var b=arguments[0];null!=b&&window.coview("log",b);a.apply(console,arguments)}}};b.prototype.handleCoviewArgument=function(a){var b=a[0];switch(b){case "updateUser":window.coview("set",
"user",a[1]);break;case "message":if(this.scriptInjected||null==this.launcherInfo)break;a[1].data.type===m.StartIFrameConnectionPostEvent.TYPE&&this.injectScript();break;default:this.scriptInjected||null==this.launcherInfo||this.isNonFunctionKey(b)||(this.initConfig.canShowButton()&&(this.launcherButton=new A.LauncherButton(this.launcherInfo.chatInfo.mainColor)),this.injectScript())}};b.prototype.injectScript=function(){var a=this;e["native"].removeIframe();this.urlChangeListenerService.removeUrlChangeListener();
var b=this.host+this.launcherInfo.scriptPath+"?v="+this.launcherInfo.version,c=document.createElement("script");c.type="text/javascript";c.src=b;c.charset="UTF-8";c.setAttribute("crossorigin","anonymous");c.setAttribute("defer","defer");c.onload=function(){var b=window._coview;a.launcherInfo.isCustomer?(b.require("coview/customer/CustomerPublicMethodsService"),b.require("coview/customer/EntryPoint")):(b.require("coview/agent/AgentPublicMethodsService"),b.require("coview/agent/EntryPoint"))};null!=
document.body?document.head.insertBefore(c,document.head.lastChild):document.addEventListener("DOMContentLoaded",function(){document.head.insertBefore(c,document.head.lastChild)});this.scriptInjected=!0;this.intercomContext.shutdown()};b.prototype.post=function(b,d,h,k){var g=this,l=e["native"].createXmlHttpRequest();l.onreadystatechange=function(){g.handleResponse(l,h,k)};l.open("post",d,!0);l.withCredentials=!1;l.setRequestHeader("Content-type","application/json;charset=UTF-8");this.cookieService.resolveAndSetCookieSuffix(d,
b.jwtCookieSuffix);d=this.cookieService.getCookie(f.CookieService.AGENT_FREE_BROWSE_JWT_COOKIE_NAME);null!=d?l.setRequestHeader("X-AGENT-FREEBROWSE-TOKEN",d):(d=this.cookieService.getCookie(f.CookieService.CUSTOMER_JWT_COOKIE_NAME),null!=d&&l.setRequestHeader("Authorization","Bearer "+d));d=new a.InitRequestTO;d.agentModeRequest=this.hasAgentRequestModeParam();d.projectKey=b.projectKey;d.originUrl=window.location.href;d.skipTracking=null==b.skipTracking?!1:b.skipTracking;d.screenSize=screen.width+
","+screen.height;b=b.getCredentials();null!=b&&(b.className=c.CustomerCredentials.CLASS_NAME,d.credentials=b);this.sendRequest(l,d,h)};b.prototype.sendRequest=function(b,a,c){b.send(u.JsonUtil.stringify(a))};b.prototype.handleResponse=function(b,a,c){4===b.readyState&&200===b.status&&(200===b.status?null!=a&&(0<b.response.length?a(JSON.parse(b.response)):a(null)):(console.log("error on launching coview "+b.status+" : "+b.statusText),c&&c()))};b.prototype.connectToExternalTools=function(){h.IntercomApiProvider.isIntercomInstalled()&&
this.intercomContext.connectToIntercom()};b.prototype.isNonFunctionKey=function(a){return-1!==b.NON_FUNCTION_KEYWORDS.indexOf(a)};b.prototype.isStopFunctionKey=function(a){return-1!==b.STOP_FUNCTION_KEYWORDS.indexOf(a)};b.prototype.isStartFunctionKey=function(a){return-1!==b.START_FUNCTION_KEYWORDS.indexOf(a)};b.prototype.hasAgentRequestModeParam=function(){return-1!==window.location.search.indexOf(b.REQUEST_AGENT_MODE)};b.prototype.getOrCreateCoviewObjectArguments=function(){var a=window.coview.a;
null==a&&(a=[],window.coview.a=a);return a};b.prototype.getInitConfig=function(){return this.initConfig};b.prototype.getHost=function(){return this.host};b.prototype.isScriptInjected=function(){return this.scriptInjected};b.NON_FUNCTION_KEYWORDS="set start log error updateUser debug message".split(" ");b.STOP_FUNCTION_KEYWORDS=["stop","clearSession"];b.START_FUNCTION_KEYWORDS=["set","start"];b.REQUEST_SCREENSHOT="coview-screenshot";b.REQUEST_SCREENCAST="coview-screencast";b.REQUEST_COBROWSE="coview-screenshare";
b.REQUEST_AGENT_MODE="coview-agent-mode";return b}();b.Launcher=d});k("coview/launcher/StartLauncher",["require","exports","coview/launcher/Launcher"],function(d,b,e){Object.defineProperty(b,"__esModule",{value:!0});(new e.Launcher).init()});k("coview/api/integration/IntegrationType",["require","exports"],function(d,b){Object.defineProperty(b,"__esModule",{value:!0});b.IntegrationType=void 0;var e=b.IntegrationType||(b.IntegrationType={});e.JIRA="JIRA";e.INTERCOM="INTERCOM";e.ASANA="ASANA"});f("coview/launcher/StartLauncher")})();})();
